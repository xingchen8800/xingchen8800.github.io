---
title: 男生女生配
date: 2025-02-15 18:46:24
tags:
    - C++
    - 前缀和
    - 枚举
    - 枚举优化
---

## 题目描述

科丁小学有 $N(1 \leq N \leq 10^6)$ 名学生，现在他们在操场上从左往右站成了一排，依次编号为 $1,\dots,N$。校长小科想要选出一些学生来组成合唱团。小科只会选编号连续的学生，并且他希望选出的男生和女生数量相等。小科有 $Q(1 \leq Q \leq 10^6)$ 种想法，每种想法会给定一个 $L$ 和一个 $R$ ，表示小科想选择编号 $L$ 到编号 $R$ 的所有学生，小科想知道区间 $[L, R]$ 中男生和女生的数量是否相等。

## 输入格式

第 $1$ 行：两个空格分隔的整数 $N$ 和 $Q$ ， $N$ 表示学生的数量， $Q$ 表示小科想法的数量。

第 $2$ 行：一个包含 $N$ 个字符的字符串，字符要么是`G`要么是`B`，`G`表示该位置是一个女生，`B`表示该位置是一个男生。

接下来 $Q$ 行，每行两个空格分隔的整数 $L$ 和 $R$ ，表示小科的一个想法。

## 输出格式

$Q$ 行：每行对一个小科的一个想法，如果该想法选择的区间中男生和女生的数量相同，输出`Good!`，否则输出`Bad!`。

## 输入输出样例

### 样例1

```plaintext
5 3
GGBGB
1 2
2 3
2 5
```

```plaintext
Bad!
Good!
Good!
```

## 题解

做题避免不了在 $[l,r]$ 中查询'G'或'B'的数量，自然想到了前缀和优化。

```c++
#include <bits/stdc++.h>
using namespace std;

typedef long long ll;
ll n, q;
string str;
ll boy[1000010], girl[1000010];

int main() {
    cin >> n >> q >> str;
    for(ll i = 1; i <= n; i++) {
        //前缀和处理
        if(str[i-1] == 'B') {
            boy[i] = boy[i-1] + 1;
            girl[i] = girl[i-1];
        } else  {
            boy[i] = boy[i-1];
            girl[i] = girl[i-1] + 1;
        }
    }
    for(ll i = 1, l, r; i <= q; i++) {
        scanf("%lld %lld", &l, &r);
        if(boy[r] - boy[l - 1] == girl[r] - girl[l - 1]) printf("Good!\n");
        else printf("Bad!\n");
    }
    return 0;
}
```

由于只有'G'和'B'，所以我们可以只记录 $boy$，用 $[l,r]$ 的元素数减去'B'的数量就是'G'的数量。

```c++
#include <bits/stdc++.h>
using namespace std;

typedef long long ll;
ll n, q;
string str;
ll boy[1000010];

int main() {
    cin >> n >> q >> str;
    for(ll i = 1; i <= n; i++) {
        //前缀和处理
        if(str[i-1] == 'B') {
            boy[i] = boy[i-1] + 1;
        } else  {
            boy[i] = boy[i-1];
        }
    }
    for(ll i = 1, l, r; i <= q; i++) {
        scanf("%lld %lld", &l, &r);
        ll cntB = boy[r] - boy[l-1];
        ll cntG = r - l + 1 - cntB;
        if(cntG == cntB) printf("Good!\n");
        else printf("Bad!\n");
    }
    return 0;
}
```

更进一步，我们可以将'G'看作 $-1$，这样如果一段区间的区间和为 $0$，就说明男生女生数量相同

```c++
#include <bits/stdc++.h>
using namespace std;

typedef long long ll;
ll n, q;
string str;
ll p[1000010];

int main() {
    cin >> n >> q >> str;
    for(ll i = 1; i <= n; i++) {
        //前缀和处理
        if(str[i-1] == 'B') {
            p[i] = p[i-1] + 1;
        } else  {
            p[i] = p[i-1] - 1;
        }
    }
    for(ll i = 1, l, r; i <= q; i++) {
        scanf("%lld %lld", &l, &r);
        if(p[r] - p[l-1] == 0) printf("Good!\n");
        else printf("Bad!\n");
    }
    return 0;
}
```
