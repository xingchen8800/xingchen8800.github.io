---
title: 进制纠正机
date: 2025-01-18 18:45:00
tags:
    - C++
    - 字符串
    - 进制
---

### 题目描述

小X开发了一个进制转换器程序，可以将一个十进制数转换为二进制数和三进制数。然而不幸的是程序中存在bug，每次转换出来的二进制和三进制数，总有一位是错误的（错误的数字也在进制范围内，比如二进制的错误数字只可能是 $0$ 或 $1$，不会出现 $2$，$3$ 等）。比如十进制数 $9$，对应的正确二进制数为“1001”，但是小X的程序转换后的结果可能为 $1101$ ， $0001$ ， $1000$ 等。进制转换器不会添加或删除数字。现在小X想再开发逆向程序，逆向程序可以对进制转换器转换出的错误的二进制数和三进制数进行分析，从而得到正确的十进制数。可惜小X学艺不精，空有想法却难以实现，现在请你帮帮他吧。

**注：数据保证有唯一解。**

### 输入格式

第1行：一个二进制数，其中有一位数字是错误的。

第2行：一个三进制数，其中有一位数字是错误的。

### 输出格式

一行：一个整数，表示正确的十进制数。

### 输入输出样例

**输入样例1：**

```plaintext
0001
101
```

**输出样例1：**

```plaintext
9
```

### 说明

**数据范围**

对于 $100\%$ 的数据，$0 \leq 正确的十进制数 \leq 10^9$

### 题解

把两个错误数中的每一位分别纠错，然后转为十进制验证即可。

```c++
#include <bits/stdc++.h>
using namespace std;
#define ll long long

string bin, tri;

ll bin2dec(string s) {
    ll ret = 0;
    for(ll i = s.size() - 1; i >= 0; i--) {
        ret += (s[i] - '0') * pow(2, s.size() - i - 1);
    }
    return ret;
}

ll tri2dec(string s) {
    ll ret = 0;
    for(ll i = s.size() - 1; i >= 0; i--) {
        ret += (s[i] - '0') * pow(3, s.size() - i - 1);
    }
    return ret;
}


int main() {
    cin >> bin >> tri;
    //尝试分别纠错 bin 和 tri
    for(ll i = 0; i < bin.size(); i++) {
        for(ll j = 0; j < tri.size(); j++) {
            string tmp1 = bin, tmp2 = tri;
            tmp1[i] = (bin[i] == '0' ? '1' : '0');
            for(ll k = 0; k < 3; k++) {
                tmp2[j] = k + '0';
                if(bin2dec(tmp1) == tri2dec(tmp2)) {
                    cout << bin2dec(tmp1) << endl;
                    return 0;
                }
            }
        }
    }
    return 0;
}
```

## 总结

本题复习了 $x \to 10$ 的进制转换和 $10 \to x$ 的进制转换。

$x \to 10$

```c++
//x < 10
string dec2x(ll num, ll x) {
    stack<int> st; string ret;
    while(num) { st.push(num%x); num /= x;}
    while(st.size()) {
        ret += ('0' + st.top());
        st.pop();
    }
    return ret;
}

//x < 10
ll x2dec(string num, ll x) {
    ll ret = 0;
    for(ll i = num.size() - 1; i >= 0; i--) {
        ret += (num[i] - '0') * pow(x, num.size() - i - 1);
    }
    return ret;
}
```
