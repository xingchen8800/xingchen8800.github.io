---
title: 堆
tags:
---

# 堆

堆是一种 __树形结构__，树的根是 __堆顶__，堆顶始终保持是整个堆中的 __最优值__（最大、最小...）

## 二叉堆的概念

1. 定义：二叉堆是一棵用数组实现的 __完全二叉树堆__。
2. 性质：
    1. $i>1$ 的节点的父节点为 $\frac{i}{2}$
    2. 若 $2i>n$，则 $i$ 没有孩子
    3. 若 $2i+1>n$，则 $i$ 没有右孩子
    4. 若 $i$ 有孩子，则左孩子为 $2i$，右孩子为 $2i+1$
3. 堆的操作：
    - 入堆：将元素放入堆后调整堆，保持堆顶最优
    - 出堆：取出堆顶，调整堆，保持堆顶最优

## 二叉堆的操作

### 上浮
在堆底加入新元素时，需要使用上浮操作：
1. 将元素与其父节点进行优先级 **_比较_**
    - 更优先：将其与父节点 **_交换_**
    - 不优先：**_结束操作_**
2. 重复1，直到到达堆顶或结束操作

### 下沉
在弹出堆顶时，需要使用下沉操作：
1. **_弹出_**堆顶
2. 将最后一个元素  **_放到_** 堆顶
3. 将堆顶与左节点 **_比较_**
    - 更优先： **_结束操作_**
    - 不优先：将其与左节点 **_交换_**，不执行4
4. 将堆顶与右节点 **_比较_**
    - 更优先： **_结束操作_**
    - 不优先：将其与右节点 **_交换_**
5. 重复3、4，直到到达堆底或结束操作

## 二叉堆的代码
```c++

```